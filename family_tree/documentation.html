<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Tree Visualization Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
        }
        code {
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>Family Tree Visualization Documentation</h1>
    <p>This documentation provides an overview of the components and functionality of the Family Tree Visualization project. The project is organized into three main Python files: <code>person.py</code>, <code>data_handling.py</code>, and <code>family_tree.py</code>.</p>

    <h2>person.py</h2>
    <p>This file defines the <code>Person</code> class, which is used to represent individuals in the family tree.</p>

    <h3>Person Class</h3>
    <p>The <code>Person</code> class is a blueprint for creating person objects. Each person has attributes like ID, name, gender, birth and death dates, spouse, children, and parent.</p>
    <pre><code>class Person:
    def __init__(self, id, name, gender, birth=None, death=None):
        self.id = id
        self.name = name
        self.gender = gender
        self.birth = birth
        self.death = death
        self.spouse = None
        self.children = []
        self.parent = None  
</code></pre>

    <h2>data_handling.py</h2>
    <p>This file contains functions for reading data from a CSV file and validating the relationships between individuals.</p>

    <h3>Reading Data from a CSV File</h3>
    <p>The <code>read_data</code> function reads data from a CSV file and creates <code>Person</code> objects. It uses the <code>csv.DictReader</code> to read the file and map the information into a dictionary.</p>
    <pre><code>def read_data(filename):
    people = {}
    with open(filename, newline='') as csvfile:
        reader = csv.DictReader(csvfile)
        for row in reader:
            person = Person(
                id=int(row['ID']),
                name=row['Name'],
                gender=row['Gender'],
                birth=row.get('Birth Date'),
                death=row.get('Death Date')
            )
            people[person.id] = person
</code></pre>

    <h3>Validating Relationships</h3>
    <p>The <code>read_data</code> function also includes logic to validate spouse and children IDs, ensuring that each ID exists within the <code>people</code> dictionary.</p>

    <h2>family_tree.py</h2>
    <p>This file is the main script that uses the <code>Person</code> class and the data handling functions to create and visualize the family tree.</p>

    <h3>Creating the Family Tree</h3>
    <p>The <code>create_family_tree</code> function uses the <code>Digraph</code> class from the <code>graphviz</code> library to create a directed graph representing the family tree. It sets various attributes for the graph and its nodes, such as shape, style, and color, based on the person's gender.</p>
    <pre><code>def create_family_tree(people):
    dot = Digraph('FamilyTree', format='png')
    dot.attr(rankdir='TB', splines='ortho')
    dot.attr('node', shape='ellipse', style='filled', fontname='Helvetica', width='1.9', height='1.8', margin='0.1', pad='2', fontsize='17')
    colors = {'M': 'lightblue3', 'F': 'plum1'}
</code></pre>

    <h3>Adding Nodes and Edges to the Graph</h3>
    <p>The function iterates over each person in the <code>people</code> dictionary, adding nodes for each person and connecting them based on their relationships (spouses, children). It uses special invisible nodes to represent connections between spouses and to children, ensuring that each relationship is accurately represented.</p>

    <h3>Rendering the Graph</h3>
    <p>Finally, the graph is rendered to a file, which can be viewed to see the visual representation of the family tree.</p>
    <pre><code>dot.render('output/family_tree', view=True)
</code></pre>

    <h2>Example of Graph Output</h2>
    <figure>
        <img src="output/family_tree.png" style="width: 400px; height: auto;" alt="Example of a Family Tree Graph" title="Family Tree Visualization Example">
        <figcaption>Figure 1: Example of a Family Tree Graph generated by the program.</figcaption>
    </figure>

    <h3>Main Function</h3>
    <p>The <code>main</code> function orchestrates the process, calling <code>read_data</code> to read the CSV file and <code>create_family_tree</code> to create and render the family tree graph.</p>
    <pre><code>def main():
    people = read_data('union2.csv')
    create_family_tree(people)

if __name__ == "__main__":
    main()
</code></pre>

    <h2>Conclusion</h2>
    <p>This documentation outlines the structure and functionality of the Family Tree Visualization project. It demonstrates how to read data from a CSV file, represent that data as objects in Python, and then visualize the relationships between those objects using a graph. The project is organized into three main files, each with a specific role in the process of creating and visualizing the family tree.</p>
</body>
</html>
